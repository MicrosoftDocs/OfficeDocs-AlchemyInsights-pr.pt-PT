---
title: Problemas com fichas
ms.author: v-smandalika
author: v-smandalika
manager: dansimp
ms.date: 01/15/2021
ms.audience: Admin
ms.topic: article
ms.service: o365-administration
ROBOTS: NOINDEX, NOFOLLOW
localization_priority: Priority
ms.collection: Adm_O365
ms.custom:
- "7774"
- "9004351"
ms.openlocfilehash: 14a9681c08920094813497e7a75eb87bb0733cbc
ms.sourcegitcommit: e378232f4c9ef4e962208100db752221e7bd2dd6
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 01/20/2021
ms.locfileid: "49917037"
---
# <a name="issues-with-tokens"></a><span data-ttu-id="38164-102">Problemas com fichas</span><span class="sxs-lookup"><span data-stu-id="38164-102">Issues with tokens</span></span>

<span data-ttu-id="38164-103">Para gerir questões relacionadas com fichas, pode executar os seguintes passos:</span><span class="sxs-lookup"><span data-stu-id="38164-103">To manage issues related to tokens, you can perform the following steps:</span></span>

1. <span data-ttu-id="38164-104">Pode especificar o tempo de vida útil de um token de acesso, ID ou SAML emitido pela plataforma de identidade Microsoft.</span><span class="sxs-lookup"><span data-stu-id="38164-104">You can specify the lifetime of an access, ID, or SAML token issued by Microsoft identity platform.</span></span> <span data-ttu-id="38164-105">Você pode definir vidas simbólicas para todas as aplicações da sua organização, para uma aplicação multi-inquilina (multi-organização) ou para um diretor de serviço específico na sua organização.</span><span class="sxs-lookup"><span data-stu-id="38164-105">You can set token lifetimes for all apps in your organization, for a multi-tenant (multi-organization) application, or for a specific service principal in your organization.</span></span> <span data-ttu-id="38164-106">Para obter mais informações, consulte [as vidas de símbolos configurais na plataforma de identidade da Microsoft (pré-visualização)](https://docs.microsoft.com/azure/active-directory/develop/active-directory-configurable-token-lifetimes).</span><span class="sxs-lookup"><span data-stu-id="38164-106">For more information, see [Configurable token lifetimes in Microsoft identity platform (preview)](https://docs.microsoft.com/azure/active-directory/develop/active-directory-configurable-token-lifetimes).</span></span>
2. <span data-ttu-id="38164-107">Os tokens de acesso permitem aos clientes ligar de forma segura para as APIs da web protegidas, e são usados por APIs web para realizar autenticação e autorização.</span><span class="sxs-lookup"><span data-stu-id="38164-107">Access tokens enable clients to securely call protected web APIs, and are used by web APIs to perform authentication and authorization.</span></span> <span data-ttu-id="38164-108">De acordo com a especificação OAuth, os tokens de acesso são cordas opacas sem um formato definido - alguns fornecedores de identidade (IDPs) usam GUIDs, outros usam bolhas encriptadas.</span><span class="sxs-lookup"><span data-stu-id="38164-108">As per the OAuth specification, access tokens are opaque strings without a set format - some identity providers (IDPs) use GUIDs, others use encrypted blobs.</span></span> <span data-ttu-id="38164-109">A plataforma de identidade da Microsoft utiliza uma variedade de formatos de token de acesso, dependendo da configuração da API que aceita o token.</span><span class="sxs-lookup"><span data-stu-id="38164-109">The Microsoft identity platform uses a variety of access token formats, depending on the configuration of the API that accepts the token.</span></span> <span data-ttu-id="38164-110">Para saber como a sua API pode validar e utilizar as reclamações dentro de um token de acesso, consulte [os tokens de acesso da plataforma de identidade da Microsoft.](https://docs.microsoft.com/azure/active-directory/develop/userinfo#calling-the-userinfo-endpoint)</span><span class="sxs-lookup"><span data-stu-id="38164-110">To learn how your API can validate and use the claims inside an access token, see [Microsoft identity platform access tokens](https://docs.microsoft.com/azure/active-directory/develop/userinfo#calling-the-userinfo-endpoint).</span></span>
3. <span data-ttu-id="38164-111">A Microsoft Authentication Library (MSAL) suporta vários fluxos de autenticação para utilização em diferentes cenários de aplicação.</span><span class="sxs-lookup"><span data-stu-id="38164-111">The Microsoft Authentication Library (MSAL) supports several authentication flows for use in different application scenarios.</span></span> <span data-ttu-id="38164-112">Para mais informações, consulte [os fluxos de autenticação.](https://docs.microsoft.com/azure/active-directory/develop/msal-authentication-flows#how-each-flow-emits-tokens-and-codes)</span><span class="sxs-lookup"><span data-stu-id="38164-112">For more information, see [Authentication flows](https://docs.microsoft.com/azure/active-directory/develop/msal-authentication-flows#how-each-flow-emits-tokens-and-codes).</span></span>
4. <span data-ttu-id="38164-113">A bolsa de código de autorização OAuth 2.0 pode ser usada em aplicações que são instaladas num dispositivo para ter acesso a recursos protegidos, como APIs web.</span><span class="sxs-lookup"><span data-stu-id="38164-113">The OAuth 2.0 authorization code grant can be used in apps that are installed on a device to gain access to protected resources, such as web APIs.</span></span> <span data-ttu-id="38164-114">Utilizando a implementação da plataforma de identidade microsoft de OAuth 2.0, pode adicionar acesso de s-in e API às suas aplicações móveis e desktop.</span><span class="sxs-lookup"><span data-stu-id="38164-114">Using the Microsoft identity platform implementation of OAuth 2.0, you can add sign-in and API access to your mobile and desktop apps.</span></span> <span data-ttu-id="38164-115">Consulte [a plataforma de identidade da Microsoft e o fluxo de código de autorização OAuth 2.0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow#refresh-the-access-token) para saber como programar diretamente contra o protocolo na sua aplicação, utilizando qualquer idioma.</span><span class="sxs-lookup"><span data-stu-id="38164-115">See [Microsoft identity platform and OAuth 2.0 authorization code flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow#refresh-the-access-token) for how to program directly against the protocol in your application, using any language.</span></span>
5. <span data-ttu-id="38164-116">OpenID Connect (OIDC) é um protocolo de autenticação construído no OAuth 2.0 que pode utilizar para assinar de forma segura num utilizador para uma aplicação.</span><span class="sxs-lookup"><span data-stu-id="38164-116">OpenID Connect (OIDC) is an authentication protocol built on OAuth 2.0 that you can use to securely sign in a user to an application.</span></span> <span data-ttu-id="38164-117">Quando utilizar a implementação do OpenID Connect na plataforma de identidade da Microsoft, pode adicionar acesso de s-in e API às suas apps.</span><span class="sxs-lookup"><span data-stu-id="38164-117">When you use the Microsoft identity platform endpoint's implementation of OpenID Connect, you can add sign-in and API access to your apps.</span></span> <span data-ttu-id="38164-118">[A plataforma de identidade da Microsoft e o protocolo OpenID Connect](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc#send-the-sign-in-request) mostram como fazê-lo independentemente do idioma e descreve como enviar e receber mensagens HTTP sem utilizar quaisquer bibliotecas de código aberto da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="38164-118">[Microsoft identity platform and OpenID Connect protocol](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc#send-the-sign-in-request) shows how to do this independent of language and describes how to send and receive HTTP messages without using any Microsoft open-source libraries.</span></span>
    - <span data-ttu-id="38164-119">O ponto final do UserInfo faz parte da norma OIDC, concebida para devolver reclamações sobre o utilizador que autenticou.</span><span class="sxs-lookup"><span data-stu-id="38164-119">The UserInfo endpoint is part of the OIDC standard, designed to return claims about the user that authenticated.</span></span> <span data-ttu-id="38164-120">Para obter mais informações, consulte o [ponto final da plataforma de identidade da Microsoft UserInfo](https://docs.microsoft.com/azure/active-directory/develop/userinfo#consider-use-an-id-token-instead).</span><span class="sxs-lookup"><span data-stu-id="38164-120">For more information, see [Microsoft identity platform UserInfo endpoint](https://docs.microsoft.com/azure/active-directory/develop/userinfo#consider-use-an-id-token-instead).</span></span>
    - <span data-ttu-id="38164-121">A [chamada de uma API web numa aplicação web utilizando a amostra Azure AD e OpenID Connect](https://docs.microsoft.com/samples/azure-samples/active-directory-dotnet-webapp-webapi-openidconnect/active-directory-dotnet-webapp-webapi-openidconnect/) mostra como construir uma aplicação web MVC que usa Azure AD para iniciar sposição usando o protocolo OpenID Connect e, em seguida, ligar para uma API web sob a identidade do utilizador assinado usando fichas obtidas via OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="38164-121">The [Calling a web API in a web app using Azure AD and OpenID Connect](https://docs.microsoft.com/samples/azure-samples/active-directory-dotnet-webapp-webapi-openidconnect/active-directory-dotnet-webapp-webapi-openidconnect/) sample shows how to build an MVC web application that uses Azure AD for sign-in using the OpenID Connect protocol, and then call a web API under the signed-in user's identity using tokens obtained via OAuth 2.0.</span></span> <span data-ttu-id="38164-122">Esta amostra utiliza o middleware OpenID Connect ASP .Net OWIN e o ADAL .Net.</span><span class="sxs-lookup"><span data-stu-id="38164-122">This sample uses the OpenID Connect ASP .Net OWIN middleware and ADAL .Net.</span></span>
6. <span data-ttu-id="38164-123">[Configure uma aplicação para expor uma API web](https://docs.microsoft.com/azure/active-directory/develop/quickstart-configure-app-expose-web-apis) - Neste arranque rápido, regista-se uma API web com a plataforma de identidade da Microsoft e expõe-a a aplicações de clientes adicionando um exemplo de âmbito.</span><span class="sxs-lookup"><span data-stu-id="38164-123">[Configure an application to expose a web API](https://docs.microsoft.com/azure/active-directory/develop/quickstart-configure-app-expose-web-apis) - In this quickstart, you register a web API with the Microsoft identity platform and expose it to client apps by adding an example scope.</span></span> <span data-ttu-id="38164-124">Ao registar a sua API web e expô-la através de âmbitos, pode fornecer acesso baseado em permissões aos seus recursos a utilizadores autorizados e aplicações de clientes que acedam à sua API.</span><span class="sxs-lookup"><span data-stu-id="38164-124">By registering your web API and exposing it through scopes, you can provide permissions-based access to its resources to authorized users and client apps that access your API.</span></span>
7. <span data-ttu-id="38164-125">No Azure Ative Directory B2C (Azure AD B2C), o fluxo de credenciais de senha do proprietário do recurso (ROPC) é um fluxo de autenticação padrão OAuth.</span><span class="sxs-lookup"><span data-stu-id="38164-125">In Azure Active Directory B2C (Azure AD B2C), the resource owner password credentials (ROPC) flow is an OAuth standard authentication flow.</span></span> <span data-ttu-id="38164-126">Neste fluxo, uma aplicação, também conhecida como a parte dependente, troca credenciais válidas por fichas.</span><span class="sxs-lookup"><span data-stu-id="38164-126">In this flow, an application, also known as the relying party, exchanges valid credentials for tokens.</span></span> <span data-ttu-id="38164-127">As credenciais incluem um ID do utilizador e uma senha.</span><span class="sxs-lookup"><span data-stu-id="38164-127">The credentials include a user ID and password.</span></span> <span data-ttu-id="38164-128">Os tokens devolvidos são um símbolo de identificação, ficha de acesso e um token refrescante.</span><span class="sxs-lookup"><span data-stu-id="38164-128">The tokens returned are an ID token, access token, and a refresh token.</span></span> <span data-ttu-id="38164-129">Para obter mais informações, consulte [Configurar um fluxo de credenciais de senha do proprietário de recursos no Azure Ative Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/add-ropc-policy?tabs=app-reg-ga&pivots=b2c-user-flow).</span><span class="sxs-lookup"><span data-stu-id="38164-129">For more information, see [Set up a resource owner password credentials flow in Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/add-ropc-policy?tabs=app-reg-ga&pivots=b2c-user-flow).</span></span> 

